<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>d3-zoomer</title>
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="build/d3-zoomer.js"></script>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 20px;
        }

        span.value {
            font-weight: bolder;
        }

        #container {
            width: 100%;
            height: 100%;
            margin-top: 20px;
        }
        #container svg {
            border: 1px solid black;
        }
        #container circle {
            cursor: not-allowed;
        }
    </style>
</head>
<body>
<div id="header">
    zoom status: <span id="zoom-status" class="value"></span><br>
    zoom enabled: <span id="zoom-enabled" class="value"></span><br>
    scale: <span id="scale" class="value"></span><br>
    x: <span id="transform-x" class="value"></span><br>
    y: <span id="transform-y" class="value"></span><br>
    k: <span id="transform-k" class="value"></span><br>
</div>
<div id="container"></div>
<script>
    var data = "ABCDEFGHIJ".split("");

    var width = 1200, height = 200;

    var zoomer = d3.zoomer()
      .scaleRange([0.1, 2])
      .scaleDomain([10, 200])
      .on('start', function() {
        update("start");
      })
      .on('zoom', function() {
        update("zoom");
      })
      .on('end', function() {
        update("end");
      });

    var svg = d3.select("#container").append("svg")
      .attr("width", width)
      .attr("height", height);
      // .call(zoomer); or call zoomer here! (only g.pan-zoom will be pan-zoomed)

    var circles = svg.append('g')
      .attr('class', 'circles')
      .call(zoomer); // call zoomer here!

    update();

    function update(status) {
      var enabled = zoomer.enabled(),
        scale = zoomer.scale(),
        transform = zoomer.transform();

      if(status) {
        updateValue("zoom-status", status);
      }
      updateValue("zoom-enabled", enabled);
      updateValue("scale", scale);
      updateValue("transform-x", transform.x);
      updateValue("transform-y", transform.y);
      updateValue("transform-k", transform.k);

      function updateValue(id, value) {
        d3.select("#"+id)
          .text(value);
      }
    }


    var color = d3.scaleOrdinal(d3.schemeCategory10);

    var circle = circles.selectAll("circle")
      .data(data).enter();

    circle.append("circle")
      .attr("r", "50")
      .attr("transform", function(d, i) {
        return "translate(" + (i * 150 + 50) + ",100)";
      })
      .attr("fill", function(d) {
        return color(d);
      })
      .on("mouseover", function() {
        zoomer.enabled(false);
        update();
      })
      .on("mouseout", function() {
        zoomer.enabled(true);
        update();
      });
</script>
</body>
</html>
